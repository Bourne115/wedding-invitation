# wedding-invitation

我的婚礼邀请函小程序，可以搜「小杰明的app」来查看。

## 以下是预览图，撒一波狗粮

<img src="https://res.wx.qq.com/op_res/qSx_hhHP-4WU3aeMpQwvdm2lM3s2a1fmZ_sIlFR9geJXyPGW3TgTKWqB20knhD7wAtjCBPSFi9cDITTL8NP4Ow" alt="预览图" width="320px" />

## QA

Q: 为什么不用现成的，而是要自己写一个？

A: 港真，刚开始我们确实是用现成的。起初在「婚贝」上找了个心仪模板生成了一个电子请帖，排版和样式都挺满意的，但就是最后有个尾页要付费才能去掉这点让我很不爽😠于是乎，「自己写一个」这个念头就冒出来了。

Q: 自己写一个，感觉怎么样？

A: 超级无敌爽！真的！谁写谁知道！想象一下，你可以按自己的任意想法去制作你的专属电子请帖，并且还是独一无二的，像极了爱情。然后你还可以自己指定小程序的头像、昵称、介绍等等，真的超级有专属感。

Q: 自己写会很麻烦吗？

A: 其实还好，我是基于微信小程序开发的，部署发布啥的都比较简单方便，而且还支持地图、视频号等等能力。然后又使用了云开发，连搭服务器都省了（并且还因为是新账号白嫖了一个月，刚好就到婚礼那天），至于图片CDN以及BGM都是用了婚贝的资源，只有少量icon是在[https://www.iconfont.cn/](https://www.iconfont.cn/)上找的。至于设计就更简单了，我是参考了原先看中的那个婚贝的模板，在它的基础上做了一些调整以及锦上添花（比如我想多放几张婚纱照我就搞了个轮播）。最有趣的是我还能在里面增加自己的彩蛋😄。

## 抄作业注意事项

由于该小程序是基于微信云开发来进行后端开发的，而微信云开发又不支持导出数据库配置等等信息，所以如果要抄作业的话，在云开发这块要手动做一些设置：

- 首先「环境ID」当然是毋庸置疑要改的，在 [app.js](./miniprogram/app.js) 里把 `env` 值替换成你的；
- 然后是「数据库」，我只搞了个 `surveys` 集合来存报名信息以及祝福语，手动创建一个就可以，数据权限用「仅创建者可读写」即可；
- 接着是「云函数」，我写了两个云函数 `surveys` 和 `greetings`，分别做报名和读取祝福语用的，代码在项目里，只要同步上去就行，关键是要修改「云函数权限」，修改自定义安全规则，改成「允许所有用户访问」，不然分享到朋友圈后，从朋友圈点击进去会进入「单页模式」，这个模式下它只是个快照，并没有登录态，就会导致拉取祝福语时因为没有权限而拉取失败（拉取的祝福语会在左下角做动画展示）；
- 最后，在云开发右上角的设置里找到「权限设置」，把「未登录用户访问云资源权限设置」打开，同样的，是为了解决「单页模式」的问题；

最后的最后，我在彩蛋那里搞了两个视频号组件，但是视频号组件在「单页模式」下不会展示（万恶的单页模式），所以需要判断一下当前是否为「单页模式」，是就出个提示语免得空白，可以用我在 [index.js](./miniprogram/pages/index/index.js) 里搞的 `isSinglePage` 字段来判断。

由于制作时间比较短，从冒出念头到正式上线前后应该也就一周左右，中途还要处理手上的工作（社畜的痛）以及筹备婚礼的其它事项，并且因为太久没写小程序，很多东西都已经忘了，开发的时候一直在边查边学边写，以及有些图片（比如封面图）需要自己P（毕竟没有设计师资源，只能自己动手P）等等等等各种因素……所以代码写得比较粗糙（也懒得把它写好看了），大家抄作业的话看看就行，不满意的话就自己改，我反正不会有二次开发的机会了，对我来讲，婚姻只有一次🐶。

哦对了，如果真的有人抄作业了，麻烦告知我一声，发个 Issues 或者 email 我啥的都可以，让我沾沾你们的喜气😄。
